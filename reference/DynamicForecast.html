<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The function estimates and predict models using time series dataset and provide subset forecasts within the length of trend. The recognized models are lm, smooth spline, polynomial splines with or without knots, quadratic polynomial,  and ARIMA. The robust output include the models' estimates, time-varying forecasts and plots  based on themes from ggplot. The main attraction of this function is the use of the newly introduced equal number of trend (days, months, years) to estimate forecast from the model. The function takes daily, monthly and yearly data sets for now."><title>Dynamic Forecast of Five Models and their Ensembles — DynamicForecast • Dyn4cast</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Dynamic Forecast of Five Models and their Ensembles — DynamicForecast"><meta property="og:description" content="The function estimates and predict models using time series dataset and provide subset forecasts within the length of trend. The recognized models are lm, smooth spline, polynomial splines with or without knots, quadratic polynomial,  and ARIMA. The robust output include the models' estimates, time-varying forecasts and plots  based on themes from ggplot. The main attraction of this function is the use of the newly introduced equal number of trend (days, months, years) to estimate forecast from the model. The function takes daily, monthly and yearly data sets for now."><meta property="og:image" content="https://jobnmadu.github.io/Dyn4cast/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">Dyn4cast</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">11.11.23</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/Dyn4cast.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JobNmadu/Dyn4cast/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Dynamic Forecast of Five Models and their Ensembles</h1>
      <small class="dont-index">Source: <a href="https://github.com/JobNmadu/Dyn4cast/blob/HEAD/R/DynamicForecast.R" class="external-link"><code>R/DynamicForecast.R</code></a></small>
      <div class="d-none name"><code>DynamicForecast.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function estimates and predict models using time series dataset and provide subset forecasts within the length of trend. The recognized models are lm, smooth spline, polynomial splines with or without knots, quadratic polynomial,  and ARIMA. The robust output include the models' estimates, time-varying forecasts and plots  based on themes from ggplot. The main attraction of this function is the use of the newly introduced <em>equal number of trend (days, months, years) to estimate forecast from the model</em>. The function takes <code>daily, monthly and yearly data sets for now</code>.</p>
    </div>


    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>date</dt>
<dd><p>A vector containing the dates for which the data is collected. Must be the same length with <code>series</code>. The date must be in 'YYYY-MM-DD'. If the data is monthly series, the recognized date format is the last day of the month of the dataset e.g. 2021-02-28. If the data is a yearly series, the recognized date format is the last day of the year of the data set e.g. 2020-12-31. There is no format for Quarterly data for now.</p></dd>


<dt>series</dt>
<dd><p>A vector containing data for estimation and forecasting. Must be the same length with <code>date</code>.</p></dd>


<dt>x</dt>
<dd><p>vector of optional dataset that is to be added to the model for forecasting. The modeling and forecasting is still done if not provided. Must be the same length with <code>series</code>.</p></dd>


<dt>BREAKS</dt>
<dd><p>A vector of numbers indicating points of breaks for estimation of the spline models.</p></dd>


<dt>MaximumDate</dt>
<dd><p>The date indicating the maximum date (last date) in the data frame, meaning that forecasting starts the next date following it. The date must be a recognized date format. Note that for forecasting, the date origin is set to 1970-01-01.</p></dd>


<dt>Trend</dt>
<dd><p>The type of trend. There are three options <strong>Day, Month and Year</strong>.</p></dd>


<dt>Type</dt>
<dd><p>The type of response variable. There are two options <strong>Continuous and Integer</strong>. For integer variable, the forecasts are constrained between the minimum and maximum value of the response variable.</p></dd>


<dt>Lenght</dt>
<dd><p>The length for which the forecast would be made. If not given, would default to the length of the dataset i.e. sample size.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments that may be passed to the function. If the maximum date is NULL which is is the default, it is set to the last date of the <code>series</code>. In the same way, <code>origin (origin = "YYYY-MM-DD")</code> to be used to position the date of the data is set to <strong>1970-01-01</strong> if it is not supplied as argument in order to properly date the forecasts.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list with the following components:</p>
<dl><dt><code>Spline without knots</code></dt>
<dd><p>The estimated spline model without the breaks (knots).</p></dd>

<dt><code>Spline with knots</code></dt>
<dd><p>The estimated spline model with the breaks (knots).</p></dd>

<dt><code>Smooth Spline</code></dt>
<dd><p>The smooth spline estimates.</p></dd>

<dt><code>ARIMA</code></dt>
<dd><p>Estimated Auto Regressive Integrated Moving Average model.</p></dd>

<dt><code>Quadratic</code></dt>
<dd><p>The estimated quadratic polynomial model.</p></dd>

<dt><code>Ensembled with equal weight</code></dt>
<dd><p>Estimated Ensemble model with equal weight given to each of the models. To get this, the fitted values of each of the models is divided by the number of models and summed together.</p></dd>

<dt><code>Ensembled based on weight</code></dt>
<dd><p>Estimated Ensemble model based on weight of each model. To do this, the fitted values of each model served as independent variable and regressed against the trend with interaction among the variables.</p></dd>

<dt><code>Ensembled based on summed weight</code></dt>
<dd><p>Estimated Ensemble model based on summed weight of each model. To do this, the fitted values of each model served as independent variable and is regressed against the trend.</p></dd>

<dt><code>Ensembled based on weight of fit</code></dt>
<dd><p>Estimated Ensemble model. The fit of each model is measured by the rmse.</p></dd>

<dt><code>Unconstrained Forecast</code></dt>
<dd><p>The forecast if the response variable is continuous. The number of forecasts is equivalent to the length of the dataset (equal days forecast).</p></dd>

<dt><code>Constrained Forecast</code></dt>
<dd><p>The forecast if the response variable is integer. The number of forecasts is equivalent to the length of the dataset (equal days forecast).</p></dd>

<dt><code>RMSE</code></dt>
<dd><p>Root Mean Square Error (rmse) for each forecast.</p></dd>

<dt><code>Unconstrained forecast Plot</code></dt>
<dd><p>The combined plots of the unconstrained forecasts using ggplot.</p></dd>

<dt><code>Constrained forecast Plot</code></dt>
<dd><p>The combined plots of the constrained forecasts using ggplot.</p></dd>

<dt><code>Date</code></dt>
<dd><p>This is the date range for the forecast.</p></dd>

<dt><code>Fitted plot</code></dt>
<dd><p>This is the plot of the fitted models.</p></dd>

<dt><code>Estimated coefficients</code></dt>
<dd><p>This is the estimated coefficients of the various models in the forecast.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">COVID19</span><span class="op">$</span><span class="va">Date</span> <span class="op">&lt;-</span> <span class="fu">zoo</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/zoo/man/yearmon.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="va">COVID19</span><span class="op">$</span><span class="va">Date</span>, format <span class="op">=</span> <span class="st">'%m/%d/%Y'</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co">#The date is formatted to R format</span></span></span>
<span class="r-in"><span><span class="va">LEN</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">COVID19</span><span class="op">$</span><span class="va">Case</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Dss</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">COVID19</span><span class="op">$</span><span class="va">Date</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, by <span class="op">=</span> <span class="st">"day"</span>, length.out <span class="op">=</span> <span class="va">LEN</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="co">#data length for forecast</span></span></span>
<span class="r-in"><span><span class="va">ORIGIN</span> <span class="op">=</span> <span class="st">"2020-02-29"</span></span></span>
<span class="r-in"><span><span class="va">lastdayfo21</span> <span class="op">&lt;-</span> <span class="va">Dss</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Dss</span><span class="op">)</span><span class="op">]</span> <span class="co"># The maximum length</span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="va">COVID19</span><span class="op">[</span><span class="va">COVID19</span><span class="op">$</span><span class="va">Date</span> <span class="op">&lt;=</span> <span class="va">lastdayfo21</span> <span class="op">-</span> <span class="fl">28</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># desired length of forecast</span></span></span>
<span class="r-in"><span><span class="va">BREAKS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="fl">131</span>, <span class="fl">173</span>, <span class="fl">228</span>, <span class="fl">274</span><span class="op">)</span> <span class="co"># The default breaks for the data</span></span></span>
<span class="r-in"><span><span class="fu">DynamicForecast</span><span class="op">(</span>date <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Date</span>, series <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Case</span>,</span></span>
<span class="r-in"><span>BREAKS <span class="op">=</span> <span class="va">BREAKS</span>, MaximumDate <span class="op">=</span> <span class="st">"2021-02-10"</span>,</span></span>
<span class="r-in"><span> Trend <span class="op">=</span> <span class="st">"Day"</span>, Length <span class="op">=</span> <span class="fl">0</span>, Type <span class="op">=</span> <span class="st">"Integer"</span>, origin <span class="op">=</span> <span class="va">ORIGIN</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in model.frame.default(formula = series ~ . + splines::bs(Series,     knots = NULL), data = Data, drop.unused.levels = TRUE):</span> 'data' must be a data.frame, not a matrix or an array</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">lastdayfo21</span> <span class="op">&lt;-</span> <span class="va">Dss</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">Dss</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="va">COVID19</span><span class="op">[</span><span class="va">COVID19</span><span class="op">$</span><span class="va">Date</span> <span class="op">&lt;=</span> <span class="va">lastdayfo21</span> <span class="op">-</span> <span class="fl">14</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">BREAKS</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="fl">131</span>, <span class="fl">173</span>, <span class="fl">228</span>, <span class="fl">274</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">DynamicForecast</span><span class="op">(</span>date <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Date</span>, series <span class="op">=</span> <span class="va">Data</span><span class="op">$</span><span class="va">Case</span>,</span></span>
<span class="r-in"><span>BREAKS <span class="op">=</span> <span class="va">BREAKS</span> , MaximumDate <span class="op">=</span> <span class="st">"2021-02-10"</span>,</span></span>
<span class="r-in"><span> Trend <span class="op">=</span> <span class="st">"Day"</span>, Length <span class="op">=</span> <span class="fl">0</span>, Type <span class="op">=</span> <span class="st">"Integer"</span>, origin <span class="op">=</span> <span class="va">ORIGIN</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in model.frame.default(formula = series ~ . + splines::bs(Series,     knots = NULL), data = Data, drop.unused.levels = TRUE):</span> 'data' must be a data.frame, not a matrix or an array</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Job Nmadu.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

